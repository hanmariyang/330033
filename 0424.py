import streamlit as st
import pandas as pd
import numpy as np
import altair as alt
import matplotlib.pyplot as plt
import io
import base64
plt.rcParams['font.family'] = 'AppleGothic'




st.set_page_config(page_title='recc',layout='wide')

df = pd.read_csv('/Users/jeong-yula/Desktop/streamlit/? „ì²˜ë¦¬?†µ?•©ìµœì¢….csv')
df_plus=pd.read_csv('/Users/jeong-yula/Desktop/streamlit/hs_plus.csv')
df_tool=pd.read_csv('/Users/jeong-yula/Desktop/streamlit/tool2.csv')
# hardskill_df=pd.read_csv('/Users/jeong-yula/Desktop/streamlit/hardskill.csv')




tab1, tab2, tab3, tab4 = st.tabs(["recommend", "trend", "etc","ê¸°ì—… ? •ë³?"])

with tab1:   
    # col1, col2 = st.columns(2)

    st.header('Hard Skill')
    st.write("DA : ?°?´?„° ë¶„ì„ ?ì²´ì— ????•œ ê²½í—˜")
    st.write("?†µê³? : ?†µê³? ë¶„ì„, ?†µê³„ì  ì§??‹, ?šŒê·? ë¶„ì„, ? •?Ÿ‰?  ë¶„ì„ ?“±")
    st.write("ë¨¸ì‹ ?Ÿ¬?‹ : ë¨¸ì‹ ?Ÿ¬?‹, ëª¨ë¸ë§?, ë¶„ë¥˜/?˜ˆì¸? ëª¨ë¸ë§?, ?‹œê³„ì—´ ?°?´?„° ?™œ?š©")
    st.write("?”¥?Ÿ¬?‹ : ?”¥?Ÿ¬?‹, ?•Œê³ ë¦¬ì¦?, ?”„? ˆ?„?›Œ?¬, ê²??ƒ‰ ?•Œê³ ë¦¬ì¦?, ì¶”ì²œ ?•Œê³ ë¦¬ì¦?, ??—°?–´ ì²˜ë¦¬, ì°¨ì› ëª¨ë¸ë§?")
    st.write("?‹œê°í™” : ?°?´?„° ?‹œê°í™”, BI Tool ?™œ?š©, ????‹œë³´ë“œ êµ¬ì¶•")
    st.write("?°?´?„° ê°?ê³? : ?°?´?„° ?ˆ˜ì§?, ?°?´?„° ì¶”ì¶œ, ?°?´?„° ì²˜ë¦¬")
    st.write("ë¹…ë°?´?„° : ë¹…ë°?´?„° ë¶„ì„, ë¹…ë°?´?„° ì²˜ë¦¬, ????š©?Ÿ‰ ?°?´?„° ë¶„ì‚°ì²˜ë¦¬ ê²½í—˜")
    st.write("?´?¼?š°?“œ : ?´?¼?š°?“œ ?„œë¹„ìŠ¤ ?”Œ?«?¼ (AWS, GA4, Google Cloud Platform ?“±)")
    st.write("?ŒŒ?´?”„?¼?¸ : ?°?´?„°ë§ˆíŠ¸, ?°?´?„° ?›¨?–´?•˜?š°?Š¤, ?°?´?„° ? ˆ?´?¬ êµ¬ì¶• ë°? ?°?´?„° ?ŒŒ?´?”„?¼?¸ ?„¤ê³? ê²½í—˜")
    st.write("ê·¸ë¡œ?Š¤ ?•´?‚¹ : Funnel ë¶„ì„, Cohort ë¶„ì„, AARRR, Retention, A/B?…Œ?Š¤?Š¸ ?“± ë§ˆì???Œ… ë°? ë¹„ì¦ˆ?‹ˆ?Š¤ ë¶„ì„?— ?•„?š”?•œ ë¶„ì„ ê¸°ë²• ?™œ?š© ê²½í—˜")
    st.write("ë¡œê·¸ : App/Web ?œ ??? ?°?´?„°, ?‚¬?š©? ?–‰?™ ?°?´?„°, ë¡œê·¸ ?°?´?„°")
    st.write("ë§ˆì???Œ… : ë§ˆì???Œ… ê²½í—˜, ?”„ë¡œë•?Š¸ ë¶„ì„, ë¹„ì¦ˆ?‹ˆ?Š¤ ë¶„ì„")
        
    hardskill=st.multiselect(
        'select hard skill',
        ['DA', '?†µê³?', 'ML', 'DL', '?‹œê°í™”', '?°?´?„° ê°?ê³?',
            'ë¹…ë°?´?„°', '?´?¼?š°?“œ', '?ŒŒ?´?”„?¼?¸', 'ê·¸ë¡œ?Š¤?•´?‚¹', 'ë¡œê·¸', 'ë§ˆì???Œ…']
        )





    st.header('ê²½ë ¥')
    option = st.selectbox(
        "ê²½ë ¥ ê¸°ê°„",
        ("1", "2", "3","4","5","6","7"),
        index=None
    )

    st.write('You selected:', option)




    start=st.button('ì¶”ì²œ ë°›ê¸°')

    if start:
    # df_filtered=df.loc[df['Tool'].isin(lang),:]
        filtered_df = df[(df[hardskill] == 1).any(axis=1)]
        first_row = filtered_df.iloc[0]
        index = filtered_df.index[0]


    # st.dataframe(data=filtered_df)

        selected_columns = ['Unnamed: 0', 'DA', '?†µê³?', 'ML', 'DL', '?‹œê°í™”', '?°?´?„° ê°?ê³?',
        'ë¹…ë°?´?„°', '?´?¼?š°?“œ', '?ŒŒ?´?”„?¼?¸', 'ê·¸ë¡œ?Š¤?•´?‚¹', 'ë¡œê·¸', 'ë§ˆì???Œ…']
        new_df = filtered_df[selected_columns]





        from sklearn.metrics.pairwise import cosine_similarity



        cosine_sim = cosine_similarity(new_df)


        def cos_sim_index(index_num):
            selected_similarities = cosine_sim[int(index_num)]
            similarities_with_index = [(similarity, index) for index, similarity in enumerate(selected_similarities) if index != int(index_num)]
            similarities_with_index.append((1.0, int(index_num)))  # Add similarity of 1.0 for the selected index
            sorted_similarities = sorted(similarities_with_index, key=lambda x: x[0], reverse=True)
            top_6_similar_jobs = [filtered_df.iloc[index].tolist() for similarity, index in sorted_similarities[:6]]


            df = pd.DataFrame(data = top_6_similar_jobs,columns=['Unnamed: 0', '?‚¬?´?Š¸', 'ê²??ƒ‰ ?‚¤?›Œ?“œ', 'ê¸°ì—…?´ë¦?', '?¬ì§??…˜?´ë¦?', '?¬ì§??…˜?´ë¦? ? „ì²˜ë¦¬', '?¬ì§??…˜ ?„¸ë¶? ', 'ë§ˆê°?¼', '?ƒ?‹œ ì±„ìš© ?—¬ë¶?', 'ê²½ë ¥_min', 'ê²½ë ¥_max', '?•™? ¥', '?•™? ¥ ?„¸ë¶?? •ë³?', '?Š¤?‚¬', '? œì¶œì„œë¥?', 'ì±„ìš©? ˆì°?', 'ì±„ìš©?˜•?ƒœ', 'ì±„ìš©?˜•?ƒœ_? „ì²˜ë¦¬', 'ì±„ìš©?˜•?ƒœ_? „ì²˜ë¦¬ ?„¸ë¶?', 'ê¸‰ì—¬', 'ê·¼ë¬´?‹œê°?', 'ê·¼ë¬´?¥?†Œ', 'ê·¼ë¬´?¥?†Œ ?‹œ', 'ê·¼ë¬´?¥?†Œ êµ?', 'ê²½ê¸°?„ êµ? ', 'ê·¼ë¬´?˜•?ƒœ', 'ì£¼ìš”?—…ë¬?', '?¸?¬?ƒ', '?ê²©ìš”ê±?', 'Hard Skill', 'Soft Skill', 'Tool', '?š°????‚¬?•­', 'hard plus', 'soft plus', 'tool plus', 'ë³µì??', 'ê¸°ì—…?†Œê°?', '?‘œì¤??‚°?—…ë¶„ë¥˜', 'ì£¼ìš”?‚¬?—…', 'ì£¼ìš”?‚¬?—….1', '?‚°?—…êµ?', '?‚°?—…êµ? ? „ì²˜ë¦¬', '?„¤ë¦?', '?‚¬?› ?ˆ˜', 'ê¸°ì—… ?‰ê·? ?—°ë´?', 'ê¸°ì—…?œ ?˜•', 'ê¸°ì—… ?œ ?˜• ? „ì²˜ë¦¬', 'ê¸°ì—… ?œ ?˜• ? „ì²˜ë¦¬ _?„¸ë¶?', 'ë§¤ì¶œ?•¡', '? ‘?ˆ˜ë°©ë²•', 'ì´ì ', 'ë³µì?? ë°? ê¸‰ì—¬', '?—…ë¬´ì?? ?‚¶?˜ ê· í˜•', '?‚¬?‚´ë¬¸í™”', '?Š¹ì§? ê¸°íšŒ', 'ê²½ì˜ì§?', 'ê¸°ì—…ì¶”ì²œ?œ¨', 'CEO ì§?ì§??œ¨', '?„±?¥ ê°??Š¥?„±', '?•˜?´?¼?´?Š¸+?ƒœê·?', '?‡´?‚¬', '?…?‚¬', 'ë§í¬', 'DA', '?†µê³?', 'ML', 'DL', '?‹œê°í™”', '?°?´?„° ê°?ê³?', 'ë¹…ë°?´?„°', '?´?¼?š°?“œ', '?ŒŒ?´?”„?¼?¸', 'ê·¸ë¡œ?Š¤?•´?‚¹', 'ë¡œê·¸', 'ë§ˆì???Œ…', '?„ë©”ì¸', '?”„ë¡œê·¸?˜ë°ì–¸?–´', '?˜?‚¬?†Œ?†µ', '?…¼ë¦¬ì /ë¶„ì„?  ?‚¬ê³?', 'ë¬¸ì œ?•´ê²°ëŠ¥? ¥', '?”„ë¡œì„¸?Š¤', 'ë¦¬ë”?‹­', 'ì±…ì„ê°?', '? ê·¹ì ', '?˜ì§?/?—´? •', 'ì°½ì˜? ¥', 'ë¹„ì¦ˆ?‹ˆ?Š¤', '?•¡?…˜?„ì¶?', 'Agile', '?˜?–´', 'ê´??‹¬/ê²½í—˜', 'Tool1', 'SQL', 'Python', 'R', '?‹œê°í™” ?ˆ´', 'ë¡œê·¸ë¶„ì„', 'BigData', 'Cloud', 'database', 'ê°œë°œ', 'MLtool', 'DLtool', 'DA plus', '?†µê³? plus', 'ML plus', 'DL plus', '?‹œê°í™” plus', '?°?´?„° ê°?ê³? plus', 'ë¹…ë°?´?„° plus', '?ŒŒ?´?”„?¼?¸ plus', 'ê·¸ë¡œ?Š¤?•´?‚¹ plus', 'ë¡œê·¸ plus', 'ë§ˆì???Œ… plus', '?˜?‚¬?†Œ?†µ plus', 'ë¦¬ë”?‹­ plus', 'ë¬¸ì œ?•´ê²°ëŠ¥? ¥ plus', 'Agile plus', '?•™? ¥ plus', 'ì°½ì˜? ¥ plus', '? ê·¹ì  plus', '?…¼ë¦¬ì /ë¶„ì„?  ?‚¬ê³? plus', 'ê´??‹¬/ê²½í—˜ plus', '?˜?–´ plus', '? „ê³?', 'ê³µëª¨? „', '?”„ë¡œì ?Š¸ ê²½í—˜', '?…¼ë¬?', 'tool plus1', 'SQL plus', 'Python plus', 'R plus', '?‹œê°í™” ?ˆ´ plus', 'ë¡œê·¸ë¶„ì„ plus', 'BigData plus', 'Cloud plus', 'database plus', 'ê°œë°œ plus', 'MLTool plus', 'DLTool plus']
            )

            df=df[['?‚¬?´?Š¸', 'ê²??ƒ‰ ?‚¤?›Œ?“œ', 'ê¸°ì—…?´ë¦?', '?¬ì§??…˜?´ë¦?', '?¬ì§??…˜?´ë¦? ? „ì²˜ë¦¬', '?¬ì§??…˜ ?„¸ë¶? ', 'ë§ˆê°?¼', 
                    '?ƒ?‹œ ì±„ìš© ?—¬ë¶?', 'ê²½ë ¥_min', 'ê²½ë ¥_max', '?•™? ¥', '?•™? ¥ ?„¸ë¶?? •ë³?', '?Š¤?‚¬', '? œì¶œì„œë¥?', 'ì±„ìš©? ˆì°?', 'ì±„ìš©?˜•?ƒœ', 
                    'ì±„ìš©?˜•?ƒœ_? „ì²˜ë¦¬', 'ì±„ìš©?˜•?ƒœ_? „ì²˜ë¦¬ ?„¸ë¶?', 'ê¸‰ì—¬', 'ê·¼ë¬´?‹œê°?', 'ê·¼ë¬´?¥?†Œ', 'ê·¼ë¬´?¥?†Œ ?‹œ', 'ê·¼ë¬´?¥?†Œ êµ?', 'ê²½ê¸°?„ êµ? ', 'ê·¼ë¬´?˜•?ƒœ',
                        'ì£¼ìš”?—…ë¬?', '?¸?¬?ƒ', '?ê²©ìš”ê±?', 'Hard Skill', 'Soft Skill', 'Tool', '?š°????‚¬?•­', 'hard plus', 'soft plus', 'tool plus', 
                        'ë³µì??', 'ê¸°ì—…?†Œê°?', '?‘œì¤??‚°?—…ë¶„ë¥˜', 'ì£¼ìš”?‚¬?—…', 'ì£¼ìš”?‚¬?—….1', '?‚°?—…êµ?', '?‚°?—…êµ? ? „ì²˜ë¦¬', '?„¤ë¦?', '?‚¬?› ?ˆ˜', 'ê¸°ì—… ?‰ê·? ?—°ë´?', 'ê¸°ì—…?œ ?˜•',
                        'ê¸°ì—… ?œ ?˜• ? „ì²˜ë¦¬', 'ê¸°ì—… ?œ ?˜• ? „ì²˜ë¦¬ _?„¸ë¶?', 'ë§¤ì¶œ?•¡', '? ‘?ˆ˜ë°©ë²•', 'ì´ì ', 'ë³µì?? ë°? ê¸‰ì—¬', '?—…ë¬´ì?? ?‚¶?˜ ê· í˜•', '?‚¬?‚´ë¬¸í™”', '?Š¹ì§? ê¸°íšŒ', 
                    'ê²½ì˜ì§?', 'ê¸°ì—…ì¶”ì²œ?œ¨', 'CEO ì§?ì§??œ¨', '?„±?¥ ê°??Š¥?„±', '?•˜?´?¼?´?Š¸+?ƒœê·?', '?‡´?‚¬', '?…?‚¬', 'ë§í¬'
                    ,'DA', '?†µê³?', 'ML', 'DL', '?‹œê°í™”', '?°?´?„° ê°?ê³?',
                'ë¹…ë°?´?„°', '?´?¼?š°?“œ', '?ŒŒ?´?”„?¼?¸', 'ê·¸ë¡œ?Š¤?•´?‚¹', 'ë¡œê·¸', 'ë§ˆì???Œ…']]

            st.header('?ƒ?œ„5ê°?')
            st.dataframe(data=df)


        cos_sim_index(index)

        # ?š°????‚¬?•­
        filtered_df_plus = df_plus[(df_plus[hardskill] == 1).all(axis=1)]
        first_row_plus = filtered_df_plus.iloc[0]
        index_plus = filtered_df_plus.index[0]


        selected_columns = ['Unnamed: 0', 'DA', '?†µê³?', 'ML', 'DL', '?‹œê°í™”', '?°?´?„° ê°?ê³?',
            'ë¹…ë°?´?„°', '?´?¼?š°?“œ', '?ŒŒ?´?”„?¼?¸', 'ê·¸ë¡œ?Š¤?•´?‚¹', 'ë¡œê·¸', 'ë§ˆì???Œ…']
        new_df_plus = filtered_df_plus[selected_columns]


        cosine_sim = cosine_similarity(new_df_plus)


        def cos_sim_index(index_num):
            selected_similarities = cosine_sim[int(index_num)]
            similarities_with_index = [(similarity, index) for index, similarity in enumerate(selected_similarities) if index != int(index_num)]
            similarities_with_index.append((1.0, int(index_num)))  # Add similarity of 1.0 for the selected index
            sorted_similarities = sorted(similarities_with_index, key=lambda x: x[0], reverse=True)
            top_6_similar_jobs = [filtered_df_plus.iloc[index].tolist() for similarity, index in sorted_similarities[:6]]


            df_plus = pd.DataFrame(data = top_6_similar_jobs,columns=['Unnamed: 0','Unnamed: 0', '?‚¬?´?Š¸', 'ê²??ƒ‰ ?‚¤?›Œ?“œ', 'ê¸°ì—…?´ë¦?', '?¬ì§??…˜?´ë¦?', '?¬ì§??…˜?´ë¦? ? „ì²˜ë¦¬', '?¬ì§??…˜ ?„¸ë¶? ', 'ë§ˆê°?¼', '?ƒ?‹œ ì±„ìš© ?—¬ë¶?', 'ê²½ë ¥_min', 'ê²½ë ¥_max', '?•™? ¥', '?•™? ¥ ?„¸ë¶?? •ë³?', '?Š¤?‚¬', '? œì¶œì„œë¥?', 'ì±„ìš©? ˆì°?', 'ì±„ìš©?˜•?ƒœ', 'ì±„ìš©?˜•?ƒœ_? „ì²˜ë¦¬', 'ì±„ìš©?˜•?ƒœ_? „ì²˜ë¦¬ ?„¸ë¶?', 'ê¸‰ì—¬', 'ê·¼ë¬´?‹œê°?', 'ê·¼ë¬´?¥?†Œ', 'ê·¼ë¬´?¥?†Œ ?‹œ', 'ê·¼ë¬´?¥?†Œ êµ?', 'ê²½ê¸°?„ êµ? ', 'ê·¼ë¬´?˜•?ƒœ', 'ì£¼ìš”?—…ë¬?', '?¸?¬?ƒ', '?ê²©ìš”ê±?', 'Hard Skill', 'Soft Skill', 'Tool', '?š°????‚¬?•­', 'hard plus', 'soft plus', 'tool plus', 'ë³µì??', 'ê¸°ì—…?†Œê°?', '?‘œì¤??‚°?—…ë¶„ë¥˜', 'ì£¼ìš”?‚¬?—…', 'ì£¼ìš”?‚¬?—….1', '?‚°?—…êµ?', '?‚°?—…êµ? ? „ì²˜ë¦¬', '?„¤ë¦?', '?‚¬?› ?ˆ˜', 'ê¸°ì—… ?‰ê·? ?—°ë´?', 'ê¸°ì—…?œ ?˜•', 'ê¸°ì—… ?œ ?˜• ? „ì²˜ë¦¬', 'ê¸°ì—… ?œ ?˜• ? „ì²˜ë¦¬ _?„¸ë¶?', 'ë§¤ì¶œ?•¡', '? ‘?ˆ˜ë°©ë²•', 'ì´ì ', 'ë³µì?? ë°? ê¸‰ì—¬', '?—…ë¬´ì?? ?‚¶?˜ ê· í˜•', '?‚¬?‚´ë¬¸í™”', '?Š¹ì§? ê¸°íšŒ', 'ê²½ì˜ì§?', 'ê¸°ì—…ì¶”ì²œ?œ¨', 'CEO ì§?ì§??œ¨', '?„±?¥ ê°??Š¥?„±', '?•˜?´?¼?´?Š¸+?ƒœê·?', '?‡´?‚¬', '?…?‚¬', 'ë§í¬', 'DA', '?†µê³?', 'ML', 'DL', '?‹œê°í™”', '?°?´?„° ê°?ê³?', 'ë¹…ë°?´?„°', '?´?¼?š°?“œ', '?ŒŒ?´?”„?¼?¸', 'ê·¸ë¡œ?Š¤?•´?‚¹', 'ë¡œê·¸', 'ë§ˆì???Œ…', '?„ë©”ì¸', '?”„ë¡œê·¸?˜ë°ì–¸?–´', '?˜?‚¬?†Œ?†µ', '?…¼ë¦¬ì /ë¶„ì„?  ?‚¬ê³?', 'ë¬¸ì œ?•´ê²°ëŠ¥? ¥', '?”„ë¡œì„¸?Š¤', 'ë¦¬ë”?‹­', 'ì±…ì„ê°?', '? ê·¹ì ', '?˜ì§?/?—´? •', 'ì°½ì˜? ¥', 'ë¹„ì¦ˆ?‹ˆ?Š¤', '?•¡?…˜?„ì¶?', 'Agile', '?˜?–´', 'ê´??‹¬/ê²½í—˜', 'Tool1', 'SQL', 'Python', 'R', '?‹œê°í™” ?ˆ´', 'ë¡œê·¸ë¶„ì„', 'BigData', 'Cloud', 'database', 'ê°œë°œ', 'MLtool', 'DLtool', 'DA', '?†µê³?', 'ML', 'DL', '?‹œê°í™”', '?°?´?„° ê°?ê³?', 'ë¹…ë°?´?„°', '?ŒŒ?´?”„?¼?¸', 'ê·¸ë¡œ?Š¤?•´?‚¹', 'ë¡œê·¸', 'ë§ˆì???Œ…', '?˜?‚¬?†Œ?†µ plus', 'ë¦¬ë”?‹­ plus', 'ë¬¸ì œ?•´ê²°ëŠ¥? ¥ plus', 'Agile plus', '?•™? ¥ plus', 'ì°½ì˜? ¥ plus', '? ê·¹ì  plus', '?…¼ë¦¬ì /ë¶„ì„?  ?‚¬ê³? plus', 'ê´??‹¬/ê²½í—˜ plus', '?˜?–´ plus', '? „ê³?', 'ê³µëª¨? „', '?”„ë¡œì ?Š¸ ê²½í—˜', '?…¼ë¬?', 'tool plus1', 'SQL plus', 'Python plus', 'R plus', '?‹œê°í™” ?ˆ´ plus', 'ë¡œê·¸ë¶„ì„ plus', 'BigData plus', 'Cloud plus', 'database plus', 'ê°œë°œ plus', 'MLTool plus', 'DLTool plus']
        )

            df_plus=df_plus[['?‚¬?´?Š¸', 'ê²??ƒ‰ ?‚¤?›Œ?“œ', 'ê¸°ì—…?´ë¦?', '?¬ì§??…˜?´ë¦?', '?¬ì§??…˜?´ë¦? ? „ì²˜ë¦¬', '?¬ì§??…˜ ?„¸ë¶? ', 'ë§ˆê°?¼', 
                '?ƒ?‹œ ì±„ìš© ?—¬ë¶?', 'ê²½ë ¥_min', 'ê²½ë ¥_max', '?•™? ¥', '?•™? ¥ ?„¸ë¶?? •ë³?', '?Š¤?‚¬', '? œì¶œì„œë¥?', 'ì±„ìš©? ˆì°?', 'ì±„ìš©?˜•?ƒœ', 
                'ì±„ìš©?˜•?ƒœ_? „ì²˜ë¦¬', 'ì±„ìš©?˜•?ƒœ_? „ì²˜ë¦¬ ?„¸ë¶?', 'ê¸‰ì—¬', 'ê·¼ë¬´?‹œê°?', 'ê·¼ë¬´?¥?†Œ', 'ê·¼ë¬´?¥?†Œ ?‹œ', 'ê·¼ë¬´?¥?†Œ êµ?', 'ê²½ê¸°?„ êµ? ', 'ê·¼ë¬´?˜•?ƒœ',
                    'ì£¼ìš”?—…ë¬?', '?¸?¬?ƒ', '?ê²©ìš”ê±?', 'Hard Skill', 'Soft Skill', 'Tool', '?š°????‚¬?•­', 'hard plus', 'soft plus', 'tool plus', 
                    'ë³µì??', 'ê¸°ì—…?†Œê°?', '?‘œì¤??‚°?—…ë¶„ë¥˜', 'ì£¼ìš”?‚¬?—…', 'ì£¼ìš”?‚¬?—….1', '?‚°?—…êµ?', '?‚°?—…êµ? ? „ì²˜ë¦¬', '?„¤ë¦?', '?‚¬?› ?ˆ˜', 'ê¸°ì—… ?‰ê·? ?—°ë´?', 'ê¸°ì—…?œ ?˜•',
                    'ê¸°ì—… ?œ ?˜• ? „ì²˜ë¦¬', 'ê¸°ì—… ?œ ?˜• ? „ì²˜ë¦¬ _?„¸ë¶?', 'ë§¤ì¶œ?•¡', '? ‘?ˆ˜ë°©ë²•', 'ì´ì ', 'ë³µì?? ë°? ê¸‰ì—¬', '?—…ë¬´ì?? ?‚¶?˜ ê· í˜•', '?‚¬?‚´ë¬¸í™”', '?Š¹ì§? ê¸°íšŒ', 
                'ê²½ì˜ì§?', 'ê¸°ì—…ì¶”ì²œ?œ¨', 'CEO ì§?ì§??œ¨', '?„±?¥ ê°??Š¥?„±', '?•˜?´?¼?´?Š¸+?ƒœê·?', '?‡´?‚¬', '?…?‚¬', 'ë§í¬']]

            st.header('?š°????‚¬?•­ 5ê°?')
            st.dataframe(data=df_plus)


        cos_sim_index(index_plus)




with tab2:
   st.header("Trend")

   with st.container():
      st.write("This is inside the container")

   # You can call any Streamlit command, including custom components:
   st.bar_chart(np.random.randn(50, 3))

   st.write("This is outside the container")


with tab3:
    col1, col2, col3 = st.columns(3)
    with col1:
        st.header('Soft Skill')
        softskill=st.multiselect(
            'soft skill ?„ ?ƒ',
            ['?˜?‚¬?†Œ?†µ', '?…¼ë¦¬ì /ë¶„ì„?  ?‚¬ê³?', 'ë¬¸ì œ?•´ê²°ëŠ¥? ¥', '?”„ë¡œì„¸?Š¤', 'ë¦¬ë”?‹­', 'ì±…ì„ê°?', 
             '? ê·¹ì ', '?˜ì§?/?—´? •', 'ì°½ì˜? ¥', 'ë¹„ì¦ˆ?‹ˆ?Š¤', '?•¡?…˜?„ì¶?', 'Agile', '?˜?–´', 'ê´??‹¬/ê²½í—˜']
            )
        start1=st.button('ê´?? ¨ ê³µê³  ?™•?¸?•˜ê¸?',key='1')
        if start1:
            filtered_softskill= df[(df[softskill] == 1).all(axis=1)]

            
            filtered_softskill=filtered_softskill[['?‚¬?´?Š¸', 'ê²??ƒ‰ ?‚¤?›Œ?“œ', 'ê¸°ì—…?´ë¦?', '?¬ì§??…˜?´ë¦?', '?¬ì§??…˜?´ë¦? ? „ì²˜ë¦¬', '?¬ì§??…˜ ?„¸ë¶? ', 'ë§ˆê°?¼', 
                   '?ƒ?‹œ ì±„ìš© ?—¬ë¶?', 'ê²½ë ¥_min', 'ê²½ë ¥_max', '?•™? ¥', '?•™? ¥ ?„¸ë¶?? •ë³?', '?Š¤?‚¬', '? œì¶œì„œë¥?', 'ì±„ìš©? ˆì°?', 'ì±„ìš©?˜•?ƒœ', 
                   'ì±„ìš©?˜•?ƒœ_? „ì²˜ë¦¬', 'ì±„ìš©?˜•?ƒœ_? „ì²˜ë¦¬ ?„¸ë¶?', 'ê¸‰ì—¬', 'ê·¼ë¬´?‹œê°?', 'ê·¼ë¬´?¥?†Œ', 'ê·¼ë¬´?¥?†Œ ?‹œ', 'ê·¼ë¬´?¥?†Œ êµ?', 'ê²½ê¸°?„ êµ? ', 'ê·¼ë¬´?˜•?ƒœ',
                     'ì£¼ìš”?—…ë¬?', '?¸?¬?ƒ', '?ê²©ìš”ê±?', 'Hard Skill', 'Soft Skill', 'Tool', '?š°????‚¬?•­', 'hard plus', 'soft plus', 'tool plus', 
                     'ë³µì??', 'ê¸°ì—…?†Œê°?', '?‘œì¤??‚°?—…ë¶„ë¥˜', 'ì£¼ìš”?‚¬?—…', 'ì£¼ìš”?‚¬?—….1', '?‚°?—…êµ?', '?‚°?—…êµ? ? „ì²˜ë¦¬', '?„¤ë¦?', '?‚¬?› ?ˆ˜', 'ê¸°ì—… ?‰ê·? ?—°ë´?', 'ê¸°ì—…?œ ?˜•',
                       'ê¸°ì—… ?œ ?˜• ? „ì²˜ë¦¬', 'ê¸°ì—… ?œ ?˜• ? „ì²˜ë¦¬ _?„¸ë¶?', 'ë§¤ì¶œ?•¡', '? ‘?ˆ˜ë°©ë²•', 'ì´ì ', 'ë³µì?? ë°? ê¸‰ì—¬', '?—…ë¬´ì?? ?‚¶?˜ ê· í˜•', '?‚¬?‚´ë¬¸í™”', '?Š¹ì§? ê¸°íšŒ', 
                   'ê²½ì˜ì§?', 'ê¸°ì—…ì¶”ì²œ?œ¨', 'CEO ì§?ì§??œ¨', '?„±?¥ ê°??Š¥?„±', '?•˜?´?¼?´?Š¸+?ƒœê·?', '?‡´?‚¬', '?…?‚¬', 'ë§í¬']]
            st.dataframe(data=filtered_softskill)


    with col2:
        st.header('?„ë©”ì¸')
        domain=st.multiselect(
            'ê´??‹¬ ?„ë©”ì¸ ?„ ?ƒ',
            ['? œì¡?', '?•­ê³?', 'ë§ˆì???Œ…', '? •ë³? ë³´ì•ˆ', 'ê¸ˆìœµ', 'ì±„ìš©', '?‘?š© ?†Œ?”„?Š¸?›¨?–´ ê°œë°œ', 'ì»¨ì„¤?Œ…', '?˜ë£?',
       '?—?„ˆì§?', '?´ì»¤ë¨¸?Š¤', 'ëª¨ë¹Œë¦¬í‹°', '?—”?„°?…Œ?¸ë¨¼íŠ¸', '?œ ?†µ', 'ê±´ê°•', 'ê°?? „', '?Œ¨?…˜', '? •ë³? ?„œë¹„ìŠ¤?—…',
       'ê²Œì„', '?—¬?–‰', '?• ê²?', 'êµìœ¡', 'ë°°ë‹¬', '?‹?’ˆ', 'ë¬¼ë¥˜', 'ì¶œíŒ', '?ˆ¬?', '?†µ?‹ ', 'ë¶??™?‚°',
       '?—†?Œ', 'ë¦¬ì„œì¹?', 'ì¶•ì‚°', '?™˜ê²?', '?‹œ?Š¤?…œ ?†Œ?”„?Š¸?›¨?–´ ê°œë°œ', '?Š¤?¬ì¸?', '?™”?¥?’ˆ', '?†Œ?…œ ?„¤?Š¸?›Œ?¬',
       '?´?¼?š°?“œ ì»´í“¨?Œ…'])
      
        start2=st.button('ê´?? ¨ ê³µê³  ?™•?¸?•˜ê¸?',key='2')
        if start2:
            filtered_domain=df.loc[df["?‚°?—…êµ? ? „ì²˜ë¦¬"].isin(domain),:]

            filtered_domain=filtered_domain[['?‚¬?´?Š¸', 'ê²??ƒ‰ ?‚¤?›Œ?“œ', 'ê¸°ì—…?´ë¦?', '?¬ì§??…˜?´ë¦?', '?¬ì§??…˜?´ë¦? ? „ì²˜ë¦¬', '?¬ì§??…˜ ?„¸ë¶? ', 'ë§ˆê°?¼', 
                   '?ƒ?‹œ ì±„ìš© ?—¬ë¶?', 'ê²½ë ¥_min', 'ê²½ë ¥_max', '?•™? ¥', '?•™? ¥ ?„¸ë¶?? •ë³?', '?Š¤?‚¬', '? œì¶œì„œë¥?', 'ì±„ìš©? ˆì°?', 'ì±„ìš©?˜•?ƒœ', 
                   'ì±„ìš©?˜•?ƒœ_? „ì²˜ë¦¬', 'ì±„ìš©?˜•?ƒœ_? „ì²˜ë¦¬ ?„¸ë¶?', 'ê¸‰ì—¬', 'ê·¼ë¬´?‹œê°?', 'ê·¼ë¬´?¥?†Œ', 'ê·¼ë¬´?¥?†Œ ?‹œ', 'ê·¼ë¬´?¥?†Œ êµ?', 'ê²½ê¸°?„ êµ? ', 'ê·¼ë¬´?˜•?ƒœ',
                     'ì£¼ìš”?—…ë¬?', '?¸?¬?ƒ', '?ê²©ìš”ê±?', 'Hard Skill', 'Soft Skill', 'Tool', '?š°????‚¬?•­', 'hard plus', 'soft plus', 'tool plus', 
                     'ë³µì??', 'ê¸°ì—…?†Œê°?', '?‘œì¤??‚°?—…ë¶„ë¥˜', 'ì£¼ìš”?‚¬?—…', 'ì£¼ìš”?‚¬?—….1', '?‚°?—…êµ?', '?‚°?—…êµ? ? „ì²˜ë¦¬', '?„¤ë¦?', '?‚¬?› ?ˆ˜', 'ê¸°ì—… ?‰ê·? ?—°ë´?', 'ê¸°ì—…?œ ?˜•',
                       'ê¸°ì—… ?œ ?˜• ? „ì²˜ë¦¬', 'ê¸°ì—… ?œ ?˜• ? „ì²˜ë¦¬ _?„¸ë¶?', 'ë§¤ì¶œ?•¡', '? ‘?ˆ˜ë°©ë²•', 'ì´ì ', 'ë³µì?? ë°? ê¸‰ì—¬', '?—…ë¬´ì?? ?‚¶?˜ ê· í˜•', '?‚¬?‚´ë¬¸í™”', '?Š¹ì§? ê¸°íšŒ', 
                   'ê²½ì˜ì§?', 'ê¸°ì—…ì¶”ì²œ?œ¨', 'CEO ì§?ì§??œ¨', '?„±?¥ ê°??Š¥?„±', '?•˜?´?¼?´?Š¸+?ƒœê·?', '?‡´?‚¬', '?…?‚¬', 'ë§í¬']]
                    
            st.dataframe(data=filtered_domain)


    with col3:
        st.header('TOOL')
        tool=st.multiselect('Tool ?„ ?ƒ',
                            ['sql','r','python','tableau','redash','powerbi','lookerstudio','googleanalytics','amplitude','hadoop','hive'
                             ,'airflow','bigquery','aws','spark','pytorch','tensorflow']
        )
        start3=st.button('ê´?? ¨ ê³µê³  ?™•?¸?•˜ê¸?',key='3')

        if start3:
            filtered_tool=df_tool.loc[df_tool["Tool"].isin(tool),:]
            filtered_tool=filtered_tool[['?‚¬?´?Š¸', 'ê²??ƒ‰ ?‚¤?›Œ?“œ', 'ê¸°ì—…?´ë¦?', '?¬ì§??…˜?´ë¦?', '?¬ì§??…˜?´ë¦? ? „ì²˜ë¦¬', '?¬ì§??…˜ ?„¸ë¶? ', 'ë§ˆê°?¼', 
                   '?ƒ?‹œ ì±„ìš© ?—¬ë¶?', 'ê²½ë ¥_min', 'ê²½ë ¥_max', '?•™? ¥', '?•™? ¥ ?„¸ë¶?? •ë³?', '?Š¤?‚¬', '? œì¶œì„œë¥?', 'ì±„ìš©? ˆì°?', 'ì±„ìš©?˜•?ƒœ', 
                   'ì±„ìš©?˜•?ƒœ_? „ì²˜ë¦¬', 'ì±„ìš©?˜•?ƒœ_? „ì²˜ë¦¬ ?„¸ë¶?', 'ê¸‰ì—¬', 'ê·¼ë¬´?‹œê°?', 'ê·¼ë¬´?¥?†Œ', 'ê·¼ë¬´?¥?†Œ ?‹œ', 'ê·¼ë¬´?¥?†Œ êµ?', 'ê²½ê¸°?„ êµ? ', 'ê·¼ë¬´?˜•?ƒœ',
                     'ì£¼ìš”?—…ë¬?', '?¸?¬?ƒ', '?ê²©ìš”ê±?', 'Hard Skill', 'Soft Skill', 'Tool', '?š°????‚¬?•­', 'hard plus', 'soft plus', 'tool plus', 
                     'ë³µì??', 'ê¸°ì—…?†Œê°?', '?‘œì¤??‚°?—…ë¶„ë¥˜', 'ì£¼ìš”?‚¬?—…', 'ì£¼ìš”?‚¬?—….1', '?‚°?—…êµ?', '?‚°?—…êµ? ? „ì²˜ë¦¬', '?„¤ë¦?', '?‚¬?› ?ˆ˜', 'ê¸°ì—… ?‰ê·? ?—°ë´?', 'ê¸°ì—…?œ ?˜•',
                       'ê¸°ì—… ?œ ?˜• ? „ì²˜ë¦¬', 'ê¸°ì—… ?œ ?˜• ? „ì²˜ë¦¬ _?„¸ë¶?', 'ë§¤ì¶œ?•¡', '? ‘?ˆ˜ë°©ë²•', 'ì´ì ', 'ë³µì?? ë°? ê¸‰ì—¬', '?—…ë¬´ì?? ?‚¶?˜ ê· í˜•', '?‚¬?‚´ë¬¸í™”', '?Š¹ì§? ê¸°íšŒ', 
                   'ê²½ì˜ì§?', 'ê¸°ì—…ì¶”ì²œ?œ¨', 'CEO ì§?ì§??œ¨', '?„±?¥ ê°??Š¥?„±', '?•˜?´?¼?´?Š¸+?ƒœê·?', '?‡´?‚¬', '?…?‚¬', 'ë§í¬']]
            
            st.dataframe(data=filtered_tool)

with tab4:

    df_etc=df[['ê¸°ì—…?´ë¦?','?¬ì§??…˜?´ë¦?','ë§ˆê°?¼','ì±„ìš©?˜•?ƒœ','ê·¼ë¬´?¥?†Œ','ê¸°ì—…?†Œê°?','?ê²©ìš”ê±?','?š°????‚¬?•­','ë³µì??','ì£¼ìš”?—…ë¬?',
           '?„¤ë¦?', '?‚¬?› ?ˆ˜', 'ê¸°ì—… ?‰ê·? ?—°ë´?', 'ê¸°ì—…?œ ?˜•',
                       'ê¸°ì—… ?œ ?˜• ? „ì²˜ë¦¬', 'ê¸°ì—… ?œ ?˜• ? „ì²˜ë¦¬ _?„¸ë¶?', 'ë§¤ì¶œ?•¡', '? ‘?ˆ˜ë°©ë²•', 'ì´ì ', 'ë³µì?? ë°? ê¸‰ì—¬', '?—…ë¬´ì?? ?‚¶?˜ ê· í˜•', '?‚¬?‚´ë¬¸í™”', '?Š¹ì§? ê¸°íšŒ', 
                   'ê²½ì˜ì§?', 'ê¸°ì—…ì¶”ì²œ?œ¨', 'CEO ì§?ì§??œ¨', '?„±?¥ ê°??Š¥?„±',
                   '?‡´?‚¬','?…?‚¬']]
    
    
    
    selected_info = df_etc.iloc[5]
    company_name = selected_info['ê¸°ì—…?´ë¦?']
    scores = selected_info[['ì´ì ', 'ë³µì?? ë°? ê¸‰ì—¬', '?—…ë¬´ì?? ?‚¶?˜ ê· í˜•', '?‚¬?‚´ë¬¸í™”', '?Š¹ì§? ê¸°íšŒ']]
    fig, ax = plt.subplots(figsize=(8, 4))
    ax.bar(scores.index, scores.values, color='green')
    ax.set_title(f'{company_name} ì§ì› ë§Œì¡±?„ ì§??‘œ')
    ax.set_xlabel('ì§??‘œ')
    ax.set_ylabel('ë§Œì¡±?„')
    ax.set_ylim(0, 5)  # ë§Œì¡±?„?Š” 0?—?„œ 5 ?‚¬?´?˜ ê°?
    
    st.pyplot(fig)

    
    company_name = selected_info['ê¸°ì—…?´ë¦?']
    scores1 = selected_info[['ê¸°ì—…ì¶”ì²œ?œ¨','CEO ì§?ì§??œ¨','?„±?¥ ê°??Š¥?„±']]
    fig1, ax = plt.subplots(figsize=(8, 4))
    ax.bar(scores1.index, scores.values, color='green')
    ax.set_title(f'{company_name} ê¸°ì—… ?‰ê°? ì§??‘œ(%) ')
    ax.set_xlabel('ì§??‘œ')
    ax.set_ylabel('ê¸°ì—… ?‰ê°?')
    ax.set_ylim(0, 100) 
    
    st.pyplot(fig1)


    # st.write(selected_info)

    # columns = ['ì´ì ', 'ë³µì?? ë°? ê¸‰ì—¬', '?—…ë¬´ì?? ?‚¶?˜ ê· í˜•', '?‚¬?‚´ë¬¸í™”', '?Š¹ì§? ê¸°íšŒ']
    # values = selected_info[['ì´ì ', 'ë³µì?? ë°? ê¸‰ì—¬', '?—…ë¬´ì?? ?‚¶?˜ ê· í˜•', '?‚¬?‚´ë¬¸í™”', '?Š¹ì§? ê¸°íšŒ']]

    # # ë°? ì°¨íŠ¸ë¥? ê·¸ë¦¬ê¸? ?œ„?•´ ?°?´?„°ë¥? ?”•?…”?„ˆë¦? ?˜•?ƒœë¡? ë³??™˜
    # data = {columns[i]: values[i] for i in range(len(columns))}



#     #ê¸°ì—…ëª?
#     df_name=selected_info['ê¸°ì—…?´ë¦?']
#     st.header("ê¸°ì—…ëª?")
#     st.write(df_name)

#     st.divider()  

#     # ì£¼ìš”?—…ë¬?
#     df_work=selected_info['ì£¼ìš”?—…ë¬?']
#     st.header("ì£¼ìš” ?—…ë¬?")
#     st.write(df_work)

#     st.divider()  

#     # ?ê²©ìš”ê±?
#     df_intro=selected_info['?ê²©ìš”ê±?']
#     st.header("?ê²? ?š”ê±?")
#     st.write(df_intro)


#     st.divider()  

#     # ?ê²©ìš”ê±?
#     df_pplus=selected_info['?š°????‚¬?•­']
#     st.header("?š°??? ?‚¬?•­")
#     st.write(df_pplus)

#     st.divider()  

#     # ë§¤ì¶œ?•¡
#     df_rev=selected_info['ë§¤ì¶œ?•¡']
#     st.header("ë§¤ì¶œ?•¡")
#     st.write(df_rev)

#     st.divider()  

#     # ?‚¬?›?ˆ˜ 
#     df_ppl=selected_info['?‚¬?› ?ˆ˜']
#     st.header("?‚¬?› ?ˆ˜")
#     st.write(df_ppl,"ëª?")

#     st.divider()  

#     # ê¸°ì—…?‰ê· ì—°ë´?
#     df_income=selected_info['ê¸°ì—… ?‰ê·? ?—°ë´?']
#     st.header("ê¸°ì—… ?‰ê·? ?—°ë´?")
#     st.write(df_income,"ë§Œì›")

#     st.divider()  

#     # ?‡´?‚¬?…?‚¬? ?ˆ˜ 
#     df_out=selected_info['?‡´?‚¬']
#     df_in=selected_info['?…?‚¬']
#     st.header("?‘?…„ ?‡´?‚¬/?…?‚¬? ?ˆ˜")
#     st.write(df_out,"/",df_in)

#     st.divider()  


#     st.header("ê¸°ì—… ?‰? ")

#     bar_chart_data = pd.DataFrame({
#         'aspect': ['ì´ì ', 'ë³µì?? ë°? ê¸‰ì—¬', '?›Œ?¼ë°?', '?‚¬?‚´ë¬¸í™”', '?Š¹ì§? ê¸°íšŒ'],
#         'score': selected_info[['ì´ì ', 'ë³µì?? ë°? ê¸‰ì—¬', '?—…ë¬´ì?? ?‚¶?˜ ê· í˜•', '?‚¬?‚´ë¬¸í™”', '?Š¹ì§? ê¸°íšŒ']]
#     })

#     # ë°? ì°¨íŠ¸ ?ƒ?„±
#     bar_chart = alt.Chart(bar_chart_data).mark_bar(color='gray').encode(
#         x=alt.X('aspect:N', title=None, axis=alt.Axis(labelAngle=0)),
#         y=alt.Y('score:Q', title='Score'),
#         tooltip=['aspect:N', 'score:Q']
#     ).properties(
#         width=alt.Step(80),
#         height=400
#     )

#     st.altair_chart(bar_chart, use_container_width=True)

#     st.divider()  

#     chart_data = pd.DataFrame({
#     'aspect': ['ê¸°ì—…ì¶”ì²œ?œ¨', 'CEO ì§?ì§??œ¨', '?„±?¥ ê°??Š¥?„±'],
#     'score': selected_info[['ê¸°ì—…ì¶”ì²œ?œ¨', 'CEO ì§?ì§??œ¨', '?„±?¥ ê°??Š¥?„±']]
# })

#     # ?„  ê·¸ë˜?”„ ?ƒ?„±
#     line_chart = alt.Chart(chart_data).mark_bar().encode(
#         x=alt.X('aspect:N', title=None, axis=alt.Axis(labelAngle=0)),
#         y=alt.Y('score:Q', title='Score (%)'),
#         tooltip=['aspect:N', 'score:Q']
#     ).properties(
#         width=alt.Step(80),
#         height=400
#     )


#     st.altair_chart(line_chart, use_container_width=True)

